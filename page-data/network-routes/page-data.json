{"componentChunkName":"component---src-pages-markdown-remark-fields-slug-tsx","path":"/network-routes/","result":{"data":{"markdownRemark":{"excerpt":"Sometimes a route needs to be manually configured in order to reach network nodes behind gateways/firewalls. To do this you specify that to reach a certain…","id":"e5c1c6cc-6dc8-59cf-9d42-665c5d48c94b","html":"<p>Sometimes a route needs to be manually configured in order to reach network nodes behind gateways/firewalls.</p>\n<p>To do this you specify that to reach a certain subnet you need to go through a certain gateway.</p>\n<!--more-->\n<p>In the following sections <code class=\"language-text\">$SUBNET</code> should be replaced with subnet (ip range) using either CIDR notation or subnet mask.</p>\n<p><code class=\"language-text\">$GATEWAY</code> should be replaced with gateway’s IP address.</p>\n<p>These instructions assume that you are using IPv4 addresses.</p>\n<h2 id=\"subnet-syntax\">Subnet syntax</h2>\n<h3 id=\"cidr-notation\">CIDR notation</h3>\n<p>From: <a href=\"https://en.wikipedia.org/wiki/Subnetwork\">Subnetwork - Wikipedia</a>.</p>\n<blockquote>\n<p>The routing prefix may be expressed in Classless Inter-Domain Routing (CIDR) notation written as the first address of a network, followed by a slash character (/), and ending with the bit-length of the prefix. For example, 198.51.100.0/24 is the prefix of the Internet Protocol version 4 network starting at the given address, having 24 bits allocated for the network prefix, and the remaining 8 bits reserved for host addressing. Addresses in the range 198.51.100.0 to 198.51.100.255 belong to this network, with 198.51.100.255 as the subnet broadcast address. The IPv6 address specification 2001:db8::/32 is a large address block with 296 addresses, having a 32-bit routing prefix.</p>\n</blockquote>\n<h3 id=\"subnet-mask\">Subnet mask</h3>\n<p>From: <a href=\"https://en.wikipedia.org/wiki/Subnetwork\">Subnetwork - Wikipedia</a>.</p>\n<blockquote>\n<p>For IPv4, a network may also be characterized by its subnet mask or netmask, which is the bitmask that, when applied by a bitwise AND operation to any IP address in the network, yields the routing prefix. Subnet masks are also expressed in dot-decimal notation like an IP address. For example, the prefix 198.51.100.0/24 would have the subnet mask 255.255.255.0.</p>\n</blockquote>\n<h2 id=\"platforms\">Platforms</h2>\n<h3 id=\"windows\">Windows</h3>\n<p>Use <a href=\"#subnet-mask\">subnet mask</a>, $SUBNET should be the route with 0 replacing variable parts of the IP. E.g. 192.168.X.0.</p>\n<ul>\n<li>Open administrative shell: Press Alt+X and select “Command Prompt (Admin)”/“Windows Powershell (Admin)“.</li>\n<li>Run <code class=\"language-text\">route -p ADD $SUBNET MASK $SUBNET_MASK $GATEWAY</code> (the switch <code class=\"language-text\">-p</code> makes the route persistent)</li>\n</ul>\n<h3 id=\"mac\">Mac</h3>\n<p>Use <a href=\"#cidr-notation\">CIDR notation</a>.</p>\n<ul>\n<li>Open a terminal</li>\n<li>Run <code class=\"language-bash\"><span class=\"token function\">sudo</span> route <span class=\"token parameter variable\">-n</span> <span class=\"token function\">add</span> <span class=\"token parameter variable\">-net</span> <span class=\"token variable\">$SUBNET</span> <span class=\"token variable\">$GATEWAY</span></code></li>\n</ul>\n<h3 id=\"linux\">Linux</h3>\n<p>Use <a href=\"#cidr-notation\">CIDR notation</a>.</p>\n<h4 id=\"temporarily-via-ip-route--most-distros\">Temporarily via ip route (Most distros)</h4>\n<ul>\n<li>Open a terminal.</li>\n<li>Find your preferred device using <code class=\"language-bash\"><span class=\"token function\">ip</span> <span class=\"token function\">link</span></code> (enp* or eth* for ethernet and wlp* or wifi* for wireless)</li>\n<li>Store choosen interface by running <code class=\"language-bash\"><span class=\"token assign-left variable\">DEVICE</span><span class=\"token operator\">=</span>enpXsY</code></li>\n</ul>\n<p><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">ip</span> route <span class=\"token function\">add</span> <span class=\"token variable\">$SUBNET</span> via <span class=\"token variable\">$GATEWAY</span> dev <span class=\"token string\">\"<span class=\"token variable\">$DEVICE</span>\"</span></code></p>\n<h4 id=\"networkmanager-persistent--most-distros\">NetworkManager persistent (Most distros)</h4>\n<ul>\n<li>Open a terminal.</li>\n<li>Find your preferred connection using <code class=\"language-bash\">nmcli connection show</code> (e.g. <code class=\"language-text\">Wired Connection 1</code></li>\n<li>Store chosen interface by running <code class=\"language-bash\"><span class=\"token assign-left variable\">CONNECTION</span><span class=\"token operator\">=</span><span class=\"token string\">\"Wired Connection 1\"</span></code></li>\n</ul>\n<p><code class=\"language-bash\"><span class=\"token function\">sudo</span> nmcli connection modify <span class=\"token string\">\"<span class=\"token variable\">$CONNECTION</span>\"</span> +ipv4.routes <span class=\"token string\">\"<span class=\"token variable\">$SUBNET</span> <span class=\"token variable\">$GATEWAY</span>\"</span></code></p>\n<h4 id=\"netplan-persistent-route--ubuntu-cloud-init\">Netplan persistent route (Ubuntu/cloud init)</h4>\n<ul>\n<li>Open a terminal.</li>\n<li>Find your preferred device using <code class=\"language-bash\"><span class=\"token function\">ip</span> <span class=\"token function\">link</span></code> (enp* or eth* for ethernet and wlp* or wifi* for wireless).</li>\n<li>Replace enpXsY in YAML snippet below with chosen device.</li>\n</ul>\n<p>Add the following to <code class=\"language-text\">/etc/netplan/new_route.yaml</code> (needs to be edited with sudo, any file name is fine with extension yaml/yml)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">network</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">ethernets</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enpXsY</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">to</span><span class=\"token punctuation\">:</span> $SUBNET\n          <span class=\"token key atrule\">via</span><span class=\"token punctuation\">:</span> $GATEWAY</code></pre></div>\n<p>Then run <code class=\"language-bash\"><span class=\"token function\">sudo</span> netplan apply</code>.</p>","fields":{"slug":"network-routes","category":"posts"},"frontmatter":{"title":"Adding network routes on Windows, OS X and GNU/Linux","date":"2022-10-16","machineReadableDate":"2022-10-16T00:00:00.000Z","description":null,"lang":null,"imageAlt":"AI generated image using MidJourney and the prompt: Networks, routes, gateways, firewalls and internet described by a poster in a cyber punk style with Soviet era influencees.","imageCaption":"AI generated image using <a href=","image":{"childImageSharp":{"bannerImgData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAES0lEQVR42g2T24sbdRTHf3P9zUwy18xkJjOTzCSZ+y07uWw22U02m81qdltL7fYidbXWegELgiIo1ofqgwj2QQQrviyISqvV2ooFUbBWqIg+eHko+CD4pzivh3PO98vnfA84JWG/BfBmG/6VEbu9tjAdKb1E8tv5iaNKFFmRl291BUvn1obsdGr5zt0A+8alH8TwFQMHLoVed8kfE/hRQDadhpmF1rhPlNiSXmdaLbRSIWQZhVRjreut5q1O8nKT/a5N3HFgxKCARMAVk/jJh7sCDgCKAEA0DC7x8SzGVzpyt6uu9jhFwu02IVYAQOYc9rUDP7ShiKPgyQr+c0jdcal7KSVKPEAwKU8l0xDSwBvEb0f16bn9cLlNOj7QjDrH3HbhVRP+YJOvGhC8qJN/ZvSXPvVtRGssDQrlwDt9duet84v6zsgM2sZDM3Ul5fwQmLarSDdc6poNf3eJ16wSqJHIxy5xNybOKVgxyVQlPnXqe1v1XtLd38vPnmSm61zgIBSDqkZh+6CC3vHIwzpqUYUSghAUbOiqWNMYURCyUM5jPgpwjpX73fp0JOZJbdTTQqeSRJwoUhwnChwnSTjDAxRFCQirWrXt2GqroS82apsjc3embW8YRybKaseYT7wzR/zTS2exqZmG10ny8TDtD/iqDkrl0uqoO54Msl5c2CabFqLIUi+bTHNzZyL00vXjmbU9BGsz1G4WDZbbnuxM/aiNERBAmo7TwI28MM9guSzPNrh+l0u89jCu5Ct8GiaPbdaXM2OxbQy7iqo4adQKPddpcFIFlHihtz50VzJB01st48SFE739rZXN/l6eCP2cjvz1tXh2fGtysD89s+dkSdVu+WmgWDZKlUFJkGTHLTcdVuQ/yLDbq9StBT06NtaXC31zKOWJNd/Yv3D00uE7L1y99PrlJwhBUuKgpOkIXtDGcK9Mrsk0g2NtkewE1dgS7HF3/swpf9JXBpmaeq0sqCWRmkS8KpUASCCiYQjAKTASiPsx9UtAX7EhoFlgOYBVOcfRH14AzSa82Jv3ZUMFZQGIVQQj37XhPyG8HxJpGQVvuvCPnDm0qL/XGL+hAc0y1cr1LvZZn/mqT93YLH2yZN+bQNxoFrvSmvy9T75v078m9BsWAZY18r8J82+XOswgKUlAM5Wq8unT6c2L48+fG3zxbH7t+fzDAxfRLCAbPEPfCuC9gH7QhY/qVHE5sJCQpzSgFE9VFgi9joo1rBHKjx8QgxnIN8B8D4gGbtpEkQqUCBnkJY3Y5VEUQYAgSWxVJao1TjNwTsRrJi4ZVFkjh48wzR6zPAYvXYZ2CC0Xk3WcFQTDZDSdUTS2zAFBUSynZbkOX1FQUabnI6qf46pLnr+MH7uIZDN8fobwx3ilhZVlgBFFwvwkDrNEVhTAi2JnMAg6nXqziRT0CQotySgjoPWM3zhprC/ZVoJAvqggOESwAlzL8oOm67KC9D+OdLvmy5UheAAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/1f9122c125161f105cba781479c8e97a/68aad/midjourney-network-poster.png","srcSet":"/static/1f9122c125161f105cba781479c8e97a/12803/midjourney-network-poster.png 374w,\n/static/1f9122c125161f105cba781479c8e97a/46862/midjourney-network-poster.png 748w,\n/static/1f9122c125161f105cba781479c8e97a/68aad/midjourney-network-poster.png 1496w","sizes":"(min-width: 1496px) 1496px, 100vw"},"sources":[{"srcSet":"/static/1f9122c125161f105cba781479c8e97a/24624/midjourney-network-poster.webp 374w,\n/static/1f9122c125161f105cba781479c8e97a/7111e/midjourney-network-poster.webp 748w,\n/static/1f9122c125161f105cba781479c8e97a/2119f/midjourney-network-poster.webp 1496w","type":"image/webp","sizes":"(min-width: 1496px) 1496px, 100vw"}]},"width":1496,"height":1496}}}}}},"pageContext":{"id":"e5c1c6cc-6dc8-59cf-9d42-665c5d48c94b","fields__slug":"network-routes","__params":{"fields__slug":"network-routes"}}},"staticQueryHashes":["2398550977"],"slicesMap":{}}