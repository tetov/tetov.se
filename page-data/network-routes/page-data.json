{"componentChunkName":"component---src-pages-markdown-remark-fields-slug-tsx","path":"/network-routes/","result":{"data":{"markdownRemark":{"excerpt":"Sometimes a route needs to be manually configured in order to reach network nodes behind gateways/firewalls. To do this you specify that to reach a certain…","id":"e5c1c6cc-6dc8-59cf-9d42-665c5d48c94b","html":"<p>Sometimes a route needs to be manually configured in order to reach network nodes behind gateways/firewalls.</p>\n<p>To do this you specify that to reach a certain subnet you need to go through a certain gateway.</p>\n<!--more-->\n<p>In the following sections <code class=\"language-text\">$SUBNET</code> should be replaced with subnet (ip range) using either CIDR notation or subnet mask.</p>\n<p><code class=\"language-text\">$GATEWAY</code> should be replaced with gateway’s IP address.</p>\n<p>These instructions assume that you are using IPv4 addresses.</p>\n<h2 id=\"subnet-syntax\">Subnet syntax</h2>\n<h3 id=\"cidr-notation\">CIDR notation</h3>\n<p>From: <a href=\"https://en.wikipedia.org/wiki/Subnetwork\">Subnetwork - Wikipedia</a>.</p>\n<blockquote>\n<p>The routing prefix may be expressed in Classless Inter-Domain Routing (CIDR) notation written as the first address of a network, followed by a slash character (/), and ending with the bit-length of the prefix. For example, 198.51.100.0/24 is the prefix of the Internet Protocol version 4 network starting at the given address, having 24 bits allocated for the network prefix, and the remaining 8 bits reserved for host addressing. Addresses in the range 198.51.100.0 to 198.51.100.255 belong to this network, with 198.51.100.255 as the subnet broadcast address. The IPv6 address specification 2001:db8::/32 is a large address block with 296 addresses, having a 32-bit routing prefix.</p>\n</blockquote>\n<h3 id=\"subnet-mask\">Subnet mask</h3>\n<p>From: <a href=\"https://en.wikipedia.org/wiki/Subnetwork\">Subnetwork - Wikipedia</a>.</p>\n<blockquote>\n<p>For IPv4, a network may also be characterized by its subnet mask or netmask, which is the bitmask that, when applied by a bitwise AND operation to any IP address in the network, yields the routing prefix. Subnet masks are also expressed in dot-decimal notation like an IP address. For example, the prefix 198.51.100.0/24 would have the subnet mask 255.255.255.0.</p>\n</blockquote>\n<h2 id=\"platforms\">Platforms</h2>\n<h3 id=\"windows\">Windows</h3>\n<p>Use <a href=\"#subnet-mask\">subnet mask</a>, $SUBNET should be the route with 0 replacing variable parts of the IP. E.g. 192.168.X.0.</p>\n<ul>\n<li>Open administrative shell: Press Alt+X and select “Command Prompt (Admin)”/“Windows Powershell (Admin)“.</li>\n<li>Run <code class=\"language-text\">route -p ADD $SUBNET MASK $SUBNET_MASK $GATEWAY</code> (the switch <code class=\"language-text\">-p</code> makes the route persistent)</li>\n</ul>\n<h3 id=\"mac\">Mac</h3>\n<p>Use <a href=\"#cidr-notation\">CIDR notation</a>.</p>\n<ul>\n<li>Open a terminal</li>\n<li>Run <code class=\"language-text\">sudo route -n add -net $SUBNET $GATEWAY</code></li>\n</ul>\n<h3 id=\"linux\">Linux</h3>\n<p>Use <a href=\"#cidr-notation\">CIDR notation</a>.</p>\n<h4 id=\"temporarily-via-ip-route--most-distros\">Temporarily via ip route (Most distros)</h4>\n<ul>\n<li>Open a terminal.</li>\n<li>Find your preferred device using <code class=\"language-text\">ip link</code> (enp* or eth* for ethernet and wlp* or wifi* for wireless)</li>\n<li>Store choosen interface by running <code class=\"language-text\">DEVICE=enpXsY</code></li>\n</ul>\n<p><code class=\"language-text\">sudo ip route add $SUBNET via $GATEWAY dev \"$DEVICE\"</code></p>\n<h4 id=\"networkmanager-persistent--most-distros\">NetworkManager persistent (Most distros)</h4>\n<ul>\n<li>Open a terminal.</li>\n<li>Find your preferred connection using <code class=\"language-text\">nmcli connection show</code> (e.g. <code class=\"language-text\">Wired Connection 1</code></li>\n<li>Store chosen interface by running <code class=\"language-text\">CONNECTION=\"Wired Connection 1\"</code></li>\n</ul>\n<p><code class=\"language-text\">sudo nmcli connection modify \"$CONNECTION\" +ipv4.routes \"$SUBNET $GATEWAY\"</code></p>\n<h4 id=\"netplan-persistent-route--ubuntu-cloud-init\">Netplan persistent route (Ubuntu/cloud init)</h4>\n<ul>\n<li>Open a terminal.</li>\n<li>Find your preferred device using <code class=\"language-text\">ip link</code> (enp* or eth* for ethernet and wlp* or wifi* for wireless).</li>\n<li>Replace enpXsY in YAML snippet below with chosen device.</li>\n</ul>\n<p>Add the following to <code class=\"language-text\">/etc/netplan/new_route.yaml</code> (needs to be edited with sudo, any file name is fine with extension yaml/yml)</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">network</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">version</span><span class=\"token punctuation\">:</span> <span class=\"token number\">2</span>\n  <span class=\"token key atrule\">ethernets</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">enpXsY</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">routes</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">to</span><span class=\"token punctuation\">:</span> $SUBNET\n          <span class=\"token key atrule\">via</span><span class=\"token punctuation\">:</span> $GATEWAY</code></pre></div>\n<p>Then run <code class=\"language-text\">sudo netplan apply</code>.</p>","fields":{"slug":"network-routes","category":"posts"},"frontmatter":{"title":"Adding network routes on Windows, OS X and GNU/Linux","date":"2022-10-16","machineReadableDate":"2022-10-16T00:00:00.000Z","description":null,"lang":null,"imageAlt":null,"image":{"childImageSharp":{"bannerImgData":{"layout":"constrained","placeholder":{"fallback":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEAf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGHJyGEK//EABgQAAMBAQAAAAAAAAAAAAAAAAABEQIg/9oACAEBAAEFAsuD1S8f/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEg/9oACAEBAAY/Ahz/AP/EABoQAQACAwEAAAAAAAAAAAAAAAEQEQAhUeH/2gAIAQEAAT8hNDq65heECf/aAAwDAQACAAMAAAAQf8//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAwEBPxCn/8QAFREBAQAAAAAAAAAAAAAAAAAAEBH/2gAIAQIBAT8Qh//EABoQAQACAwEAAAAAAAAAAAAAAAEAERAhMWH/2gAIAQEAAT8QLFku2jiQNvAYJHTFafXH/9k="},"images":{"fallback":{"src":"/static/6310515271e8188c2dea3007738fa5ab/23250/taylor-vick-M5tzZtFCOfs-unsplash.jpg","srcSet":"/static/6310515271e8188c2dea3007738fa5ab/ffd89/taylor-vick-M5tzZtFCOfs-unsplash.jpg 374w,\n/static/6310515271e8188c2dea3007738fa5ab/ea0d5/taylor-vick-M5tzZtFCOfs-unsplash.jpg 748w,\n/static/6310515271e8188c2dea3007738fa5ab/23250/taylor-vick-M5tzZtFCOfs-unsplash.jpg 1496w,\n/static/6310515271e8188c2dea3007738fa5ab/12fa5/taylor-vick-M5tzZtFCOfs-unsplash.jpg 2992w","sizes":"(min-width: 1496px) 1496px, 100vw"},"sources":[{"srcSet":"/static/6310515271e8188c2dea3007738fa5ab/780f6/taylor-vick-M5tzZtFCOfs-unsplash.webp 374w,\n/static/6310515271e8188c2dea3007738fa5ab/2d23f/taylor-vick-M5tzZtFCOfs-unsplash.webp 748w,\n/static/6310515271e8188c2dea3007738fa5ab/8002f/taylor-vick-M5tzZtFCOfs-unsplash.webp 1496w,\n/static/6310515271e8188c2dea3007738fa5ab/bbd2d/taylor-vick-M5tzZtFCOfs-unsplash.webp 2992w","type":"image/webp","sizes":"(min-width: 1496px) 1496px, 100vw"}]},"width":1496,"height":840}}}}}},"pageContext":{"id":"e5c1c6cc-6dc8-59cf-9d42-665c5d48c94b","fields__slug":"network-routes","__params":{"fields__slug":"network-routes"}}},"staticQueryHashes":["1394904020","80602510"]}